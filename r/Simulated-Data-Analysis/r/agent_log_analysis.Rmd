---
title: "R Notebook"
output: html_notebook
---

We start by confirming the ages of the agents by their time of entry. 
This will allow us to check if the age assignment of new agents,
and their age increment, are working correctly. 

We will do this in `data.table` for speed. 

```{r}
library(data.table)
```

Read the agent data into data-table:

```{r}
agent_dt <- fread("/Users/adityakhanna/Google Drive/My Drive/code/cadre/python/output/agent_log.csv")
```

How many agents are present at tick 991:

```{r}
agent_dt[tick == 991, .N] 
```
How many agents present at tick 991 entered after model initialization?

```{r}
agent_dt[tick == 991 & agent_id > 9999, .N] 
```

The mean age of agents at time by time of entry at tick 1:
```{r}
agent_dt[tick == 1, .("mean_age_today"=mean(agent_age), .N), 
                        by=.(agent_entry_at_tick),
         ]


```
At tick 491:

```{r}
agent_dt[tick == 491, .("mean_age_today"=mean(agent_age), .N), 
                        by=.(agent_entry_at_tick),
         ]


```

And at tick 991:

```{r}
agent_dt[tick == 991, .("mean_age_today"=mean(agent_age), .N), 
                        by=.(agent_entry_at_tick),
         ]
```

These data seem to match expectations of aging of newly entering agents.
See that at tick 1, only one agent had entered after model initialization.
and this agent was 18 years old.

At tick 491, this agent was 19 years old (491-365 years older than 18, rounded), 
and at tick 991, this agent was 21 years old (991-365 years older than 18, rounded).

So, the aging process seems to work as expected.

